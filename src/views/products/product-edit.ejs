<!DOCTYPE html>
<html lang="es">

<%- include('../partials/head', { title: 'Editar Servicio/Proyecto | FreeLab' }) %>

<body class="body-pe">
    <%- include('../partials/header') %>

    <div class="container-pe mt-5">
        <div class="card edit-product-card">
            <div class="card-header bg-primary text-white">
                <h1 class="mb-0">Editar Servicio/Proyecto</h1>
            </div>
            <div class="card-body-pe">
                <form action="/productos/editar/<%= product.id %>" method="post" enctype="multipart/form-data" autocomplete="on">
                    <!-- Agregar un input oculto para el ID del producto -->
                    <input type="hidden" name="id" value="<%= product ? product.id : '' %>">
                    <div class="row"></div>
                    <div class="col-12 mb-3">
                        <label for="nombre" class="form-editpe">Habilidad</label>
                        <input name="name" type="text" class="form-control" id="nombre" value="<%= product && product.name || '' %>" required>
                    </div>

                    <div class="mb-3">
                        <label for="descripcion" class="form-editpe">Descripción</label>
                        <textarea name="description" class="form-control" rows="3"
                            placeholder="comentanos sobre vos" id="descripcion"><%= product && product.description || '' %></textarea>
                    </div>

                    <div class="mb-3">
                        <label for="habilidades" class="form-editpe">Habilidades Practicas</label>
                        <input name="skills" type="text" class="form-control" id="habilidades"
                            value="<%= product && product.skills || '' %>" required>
                    </div>

                    <div class="mb-3">
                        <label for="image" class="form-editpe">Imágenes existentes:</label>
                        <% if (product && product.image && Array.isArray(product.image) && product.image.length > 0) { %>
                            <% product.image.forEach(function(image) { %>
                                <img src="<%= image %>" alt="Existing Image" class="existing-image">
                            <% }); %>
                        <% } else { %>
                            <p>No hay imágenes existentes.</p>
                        <% } %>
                    </div>
                    

                    <div class="mb-3">
                        <label for="image" class="form-editpe">Selecciona una imagen:</label>
                        <input type="file" name="image" id="image" multiple>
                    </div>                                                         
                    <div class="mb-3">
                        <label for="portfolio" class="form-editpe">Link a Portfolio</label>
                        <input name="portfolio" type="url" class="form-control" id="portfolio"
                            value="<%= product && product.portfolio || '' %>">
                    </div>

                    <div class="mb-3">
                        <label for="redes_sociales" class="form-editpe">Links a Redes Sociales</label>
                        <input name="redes_sociales" type="url" class="form-control" id="redes_sociales"
                            value="<%= product && product.redes_sociales || '' %>">
                    </div>

                    <div class="mb-3">
                        <label for="category" class="form-editpe">Categoría</label>
                        <select name="category" class="form-select" id="categoria">
                            <option value="" selected hidden>Selecciona una categoría</option>
                            <option value="redaccion" <%= product && product.category === 'redaccion' ? 'selected' : '' %>>Redacción</option>
                            <option value="desarrollo web" <%= product && product.category === 'desarrollo web' ? 'selected' : '' %>>Desarrollo web</option>
                            <option value="desarrollo de software" <%= product && product.category === 'desarrollo de software' ? 'selected' : '' %>>Desarrollo de software</option>
                            <option value="marketing digital" <%= product && product.category === 'marketing digital' ? 'selected' : '' %>>Marketing digital</option>
                        </select>
                    </div>

                    <div class="col-12 mb-3">
                        <div class="input-group">
                            <label for="precio" class="form-editpe me-2" >Precio:</label>
                            <div class="input-group">
                                <span class="input-group-text"> $</span>
                                <input name="" type="number" class="form-editpe" id="precio"
                                    value="<%= product && product.price || '' %>" required>
                                    <select class="custom-selectpe" id="divisa" name="divisa" required>
                                        <option value="ARS" <%= product && product.divisa === 'ARS' ? 'selected' : '' %>>ARS
                                        </option>
                                        <option value="USD" <%= product && product.divisa === 'USD' ? 'selected' : '' %>>USD
                                        </option>
                                        <option value="EUR" <%= product && product.divisa === 'EUR' ? 'selected' : '' %>>EUR
                                        </option>
                                    </select>
                            </div>
                           
                        </div>
                    </div>


                    <div class="row">
                        <div class="col-6 col-md-5 mx-auto">
                          <button type="button" class="btn btn-primary" onclick="window.history.back();">Cancelar</button>
                        </div>
                        <div class="col-6 col-md-5 mx-auto">
                          <button type="submit" class="btn btn-primary">Guardar Cambios</button>
                        </div>
                      </div>

                </form>
            </div>
        </div>
    </div>
    <%- include('../partials/footer') %>

</body>
</html>

